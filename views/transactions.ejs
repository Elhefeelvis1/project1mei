<%- include("./partials/header.ejs") %>
    <main class="salesMain">
        <div class="flash-message">
            <p class="success-msg"><%= success_msg %></p>
            <p class="failure-msg"><%= failure_msg %></p>
        </div>
        <!-- Name, filter parameters are entered to perform a search -->
        <div class="searchFilters">
            <form class="" action="/searchItems" method="post">
                <button class="btn btn-dark" type="submit">Search <i class="fa-solid fa-search"></i></button>
                <input class="form-control border-dark" type="text" name="itemName" placeholder="Enter the item name">
                <select class="form-control border-dark" name="category" id="">
                    <option hidden disabled selected value>(Select a Category)</option>
                    <% if(locals.categories){ %>
                    <% categories.forEach((ctg) => { %>
                    <option value="<%= ctg %>"><%= ctg %></option>
                    <% }) %>
                    <% } %>
                </select>
                <input class="form-control border-dark" type="text" name="minPrice" placeholder="Enter min price">
                <input class="form-control border-dark" type="text" name="maxPrice" placeholder="Enter max price">
            </form>
        </div>
        <div class="item-list-table ">
            <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col" class="text-center">#</th>
                    <th scope="col" class="col-lg-4">Item</th>
                    <th scope="col">Price</th>
                    <th scope="col" class="col-lg-2">Quantity</th>
                    <th scope="col">Unit</th>
                    <th scope="col" class="col-lg-2">Category</th>
                    <th scope="col" class="col-lg-1">Cost</th>
                    <th scope="col" class="col-lg-1">Actions</th>
                  </tr>
                </thead>
                <tbody>
                    <% if(locals.selectedItems){ %>
                    <% selectedItems.map((item, index) => { %>
                    <tr class="item-row">
                        <th scope="col"><%= index + 1 %></th>
                        <td><%= item.itemName %></td>
                        <td><%= item.sellPrice %></td>
                        <td class="">
                            <div class="input-group py-0">
                                <div class="input-group-prepend">
                                  <span class="input-group-text bg-success">N</span>
                                </div>
                                <input type="text" class="form-control border-dark" aria-label="Amount (to the nearest naira)">
                            </div>
                        </td>
                        <td><%= item.unit %></td>
                        <td><%= item.category %></td>
                        <td></td>
                        <td class="text-center">
                            <form action="/removeItem" method="post">
                                <input type="hidden" name="id" value="<%= item.productId %>">
                                <button class="btn btn-danger" type="submit"><i class="fa-solid fa-trash"></i></button>
                            </form>
                        </td>
                    </tr>
                    <% }) %>
                    <% } %>
                </tbody>
            </table>
        </div>
    </main>

<%- include("./partials/footer.ejs") %>