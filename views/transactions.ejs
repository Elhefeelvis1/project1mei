<%- include("./partials/header.ejs") %>
    <main class="salesMain">
        <div class="flash-message">
            <p class="success-msg"><%= success_msg %></p>
            <p class="failure-msg"><%= failure_msg %></p>
        </div>
        <!-- Name, filter parameters are entered to perform a search -->
        <div class="searchFilters mb-3">
            <form class="" action="/searchTransactions" method="post">
                <button class="btn btn-dark col-2" type="submit">Search <i class="fa-solid fa-search"></i></button>
                <div>
                    <label for="startDate">Start Date:</label>
                    <input id="startDate" class="form-control border-dark" type="date" name="startDate">
                </div>
                <div>
                    <label for="endDate">End Date:</label>
                    <input id="endDate" class="form-control border-dark" type="date" name="endDate">
                </div>  
                <div class="col-3">
                    <label for="transactionType">Transaction Type:</label>
                    <select class="form-control border-dark" name="transactionType" id="transactionType">
                        <option hidden disabled selected value>(Select a Transaction type)</option>
                        <option value="Sale">Sale</option>
                        <option value="Return">Return</option>
                        <option value="Purchase">Purchase</option>
                        <option value="Adjustment">Manual Adjustment</option>
                        <option value="Office">Office Use</option>
                        <option value="Damaged">Damaged</option>
                    </select>
                </div>
                <div class="col-3">
                    <label for="selectUser">User:</label>
                    <select class="form-control border-dark" name="userId" id="selectUser">
                        <option hidden disabled selected value>(Select a User)</option>
                        <% if(locals.users){ %>
                        <% users.forEach((user) => { %>
                        <option value="<%= user.id %>"><%= user.username %></option>
                        <% }) %>
                        <% } %>
                    </select>
                </div>
            </form>
        </div>
        <div class="item-list-table ">
            <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col" class="col-lg-4">Item</th>
                    <th scope="col">Trans.Type</th>
                    <th scope="col" class="">Quantity</th>
                    <th scope="col">Unit Price</th>
                    <th scope="col" class="col-lg-2">Total Price</th>
                    <th scope="col" class="col-lg-1">Pay Route</th>
                    <th scope="col" class="col-lg-1">Customer</th>
                    <th scope="col" class="col-lg-1">Category</th>
                    <th scope="col" class="col-lg-1">Unit</th>
                    <th scope="col" class="col-lg-1">Trans.Date</th>
                    <th scope="col" class="col-lg-1">User</th>
                  </tr>
                </thead>
                <tbody>
                    <% if(locals.selectedItems){ %>
                    <% selectedItems.map((item, index) => { %>
                    <tr class="item-row">
                        <td><%= item.itemName %></td>
                        <td><%= item.sellPrice %></td>
                        <td><%= item.unit %></td>
                        <td><%= item.category %></td>
                        <td></td>
                    </tr>
                    <% }) %>
                    <% } %>
                </tbody>
            </table>
        </div>
    </main>

<%- include("./partials/footer.ejs") %>